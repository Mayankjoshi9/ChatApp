{"ast":null,"code":"import { toast } from \"react-hot-toast\";\nimport { setLoading } from \"../slices/auth\";\nimport { setToken } from \"../slices/auth\";\nimport axios from \"axios\";\nconst LOGIN_API = \"http://localhost:4000/api/v1/auth/login\";\nconst SIGNUP_API = \"http://localhost:4000/api/v1/auth/signup\";\nconst OTP_API = \"http://localhost:4000/api/v1/auth/sendOtp\";\nexport function login(email, password, navigate) {\n  return async dispatch => {\n    const toastId = toast.loading(\"Loading...\");\n    dispatch(setLoading(true));\n    try {\n      const response = await axios({\n        method: 'post',\n        url: LOGIN_API,\n        data: {\n          email: email,\n          password: password\n        }\n      });\n      if (!response.data.success) {\n        throw new Error(response.data.message);\n      }\n      toast.success(\"Login Successfully\");\n      dispatch(setToken(response.data.token));\n      localStorage.setItem(\"token\", JSON.stringify(response.data.token));\n      navigate(\"/\");\n    } catch (error) {\n      console.log(\"Error in Login\");\n    }\n    dispatch(setLoading(false));\n    toast.dismiss(toastId);\n  };\n}\nexport function signup(name, email, password, otp, navigate) {\n  return async dispatch => {\n    const toastId = toast.loading(\"Loading...\");\n    dispatch(setLoading(true));\n    try {\n      const response = await axios({\n        method: 'post',\n        url: SIGNUP_API,\n        data: {\n          name: name,\n          email: email,\n          password: password,\n          confirmPassword: password,\n          otp: otp\n        }\n      });\n      console.log(\"response\", response);\n      if (!response.data.success) {\n        throw new Error(response.data.message);\n      }\n      toast.success(\"Signup Successfully\");\n      navigate(\"/login\");\n    } catch (error) {\n      console.log(\"signup api error.\");\n      toast.error(\"Signup Failed\");\n    }\n    toast.dismiss(toastId);\n    dispatch(setLoading(false));\n  };\n}\nexport function sendOtp(email, navigate) {\n  return async dispatch => {\n    const toastId = toast.loading(\"Loading...\");\n    dispatch(setLoading(true));\n    try {\n      const response = await axios({\n        method: 'post',\n        url: OTP_API,\n        data: {\n          email: email\n        }\n      });\n      if (!response.data.success) {\n        throw new Error(response.data.message);\n      }\n      toast.success(\"OTP SENT SUCCESSFULLY. \");\n      navigate(\"/verify-email\");\n    } catch (error) {\n      console.log(\"Error in Sending Otp\");\n      toast.error(\"Could not sent otp\");\n    }\n    dispatch(setLoading(false));\n    toast.dismiss(toastId);\n  };\n}\nexport function logout(navigate) {\n  return dispatch => {\n    dispatch(setToken(\"\"));\n    localStorage.removeItem(\"token\");\n  };\n}","map":{"version":3,"names":["toast","setLoading","setToken","axios","LOGIN_API","SIGNUP_API","OTP_API","login","email","password","navigate","dispatch","toastId","loading","response","method","url","data","success","Error","message","token","localStorage","setItem","JSON","stringify","error","console","log","dismiss","signup","name","otp","confirmPassword","sendOtp","logout","removeItem"],"sources":["C:/Users/mayan/OneDrive/Desktop/web_Project/Mini_Project/login_System/frontend/src/services/authAPI.js"],"sourcesContent":["\r\nimport {toast} from \"react-hot-toast\";\r\nimport { setLoading } from \"../slices/auth\";\r\nimport { setToken } from \"../slices/auth\";\r\nimport axios from \"axios\"\r\n\r\nconst LOGIN_API=\"http://localhost:4000/api/v1/auth/login\";\r\nconst SIGNUP_API=\"http://localhost:4000/api/v1/auth/signup\";\r\nconst OTP_API=\"http://localhost:4000/api/v1/auth/sendOtp\";\r\n\r\n\r\nexport function login(email,password,navigate){\r\n    \r\n    return async(dispatch)=>{\r\n        const toastId=toast.loading(\"Loading...\");\r\n        dispatch(setLoading(true));\r\n        \r\n        try {\r\n            const response=await axios({\r\n                method: 'post',\r\n                url: LOGIN_API,\r\n                data: {\r\n                  email: email,\r\n                  password: password\r\n                }\r\n              });\r\n\r\n            \r\n            if(!response.data.success){\r\n                throw new Error(response.data.message);\r\n            }\r\n\r\n            toast.success(\"Login Successfully\");\r\n            dispatch(setToken(response.data.token));\r\n            localStorage.setItem(\"token\",JSON.stringify(response.data.token));\r\n            navigate(\"/\");\r\n\r\n\r\n\r\n        } catch (error) {\r\n            console.log(\"Error in Login\")\r\n        }\r\n        dispatch(setLoading(false));\r\n        toast.dismiss(toastId);\r\n\r\n    }\r\n}\r\n\r\nexport function signup(name,email,password,otp,navigate){\r\n    return async(dispatch)=>{\r\n        const toastId=toast.loading(\"Loading...\");\r\n        dispatch(setLoading(true));\r\n        try {\r\n            const response=await axios({\r\n                  method:'post',\r\n                  url:SIGNUP_API,\r\n                  data:{\r\n                    name:name,\r\n                    email:email,\r\n                    password:password,\r\n                    confirmPassword:password,\r\n                    otp:otp,\r\n                  }\r\n            })\r\n            console.log(\"response\",response);\r\n            if(!response.data.success){\r\n                 throw new Error(response.data.message);\r\n            }\r\n            toast.success(\"Signup Successfully\");\r\n\r\n            navigate(\"/login\");\r\n            \r\n\r\n        } catch (error) {\r\n            console.log(\"signup api error.\")\r\n            toast.error(\"Signup Failed\");\r\n        }\r\n        toast.dismiss(toastId);\r\n        dispatch(setLoading(false));\r\n\r\n    }\r\n}\r\n\r\nexport function sendOtp(email,navigate){\r\n    return async(dispatch)=>{\r\n        const toastId=toast.loading(\"Loading...\");\r\n        dispatch(setLoading(true));\r\n        try {\r\n            const response=await axios({\r\n                method:'post',\r\n                url:OTP_API,\r\n                data:{\r\n                   email:email\r\n                }\r\n            });\r\n\r\n            if(!response.data.success){\r\n                throw new Error(response.data.message);\r\n            }\r\n            toast.success(\"OTP SENT SUCCESSFULLY. \");\r\n            navigate(\"/verify-email\");\r\n\r\n\r\n        } catch (error) {\r\n            console.log(\"Error in Sending Otp\");\r\n            toast.error(\"Could not sent otp\");\r\n        }\r\n        dispatch(setLoading(false));\r\n        toast.dismiss(toastId);\r\n    }\r\n}\r\n\r\n\r\nexport function logout(navigate){\r\n    return (dispatch)=>{\r\n        dispatch(setToken(\"\"));\r\n        localStorage.removeItem(\"token\");\r\n    }\r\n}\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}